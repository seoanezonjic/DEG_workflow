################################### 
## GLOBAL VARS ##
###################################  

######	EXPERIMENT VARIABLES	#######
export experiment_type="RNAseq_genome"	#-------#	Experiment type 'miRNAseq_detection', 'RNAseq_genome', 'Clusters_report' or 'RNAseq_transcriptome'  
export organism='human'	#-------#	Model organism: Currently only 'human' is available
export mapping_ref=$CODE_PATH'/references/'$organism	#-------#	References path: The references will be downloaded and indexed there. For human use mapping_ref=~pedro/proyectos/ramon_areces19/pmm2_belen/project_execution/references/
export TRIM_TEMPLATE="transcriptomics.txt"	#-------#	Trimming template path. Available options are "$CODE_PATH"/templates/trimming/miRNA.txt or transcriptomics.txt

######	EXECUTION VARIABLES	#######
export RESOURCES="-c 2 -t 10:00:00 -n cal -m 4"	#-------#	AutoFlow resources setting 
export project_folder=`pwd`'/project_execution'	#-------#	Global execution folder 
export MAPPING_RESULTS_FOLDER=$project_folder'/clean_and_map'	#-------#	Secondary execution path
export launch_login=FALSE 	#-------#	Login execution mode. Set this variable to 'TRUE' to execute all modules at login.

######	SAMPLES VARIABLES	#######
export SAMPLES_FILE=$CODE_PATH"/samples_to_process.lst"	#-------#	A list with sample names. File name must be unique and in must not include paired-end information or file extension. (e.g. For file "sample_ex_1.fastq.gz" and "sample_ex_2.fastq.gz", filename is "sample_ex")
export read_path=$CODE_PATH'/raw_data'	#-------#	New path where samples were linked and renamed

#####	REPORT VARIABLES	#######
export REPORT_TEMPLATES_FOLDER=$CODE_PATH'/templates/reports'	#-------#	Report templates path
export report_folder=$project_folder'/mapping_reports'	#-------#	Reports output path


if [[ $experiment_type == "miRNAseq_detection" ]]; then

	##################################
	## miRNA-seq variables
	##################################
	export TEMPLATE=$CODE_PATH"/templates/miRNA_detection.txt"	#-------#	AutoFlow mapping template. It is advisable not to modify this variable
	export MIRBASE_ORGANISM='hsa'	#--------#	STRING 	for mirbase filtering (three words code) 'hsa', 'mmu'

elif [[ $experiment_type == "RNAseq_genome" || $experiment_type == "RNAseq_transcriptome" || $experiment_type == "Clusters_report" ]]; then
	##################################
	## RNA-seq variables
	##################################
	####### Mapping	#######

	export HUNTER_RESULTS_FOLDER=$project_folder'/DEGenesHunter_results'	#-------#	Secondary execution path
	export TEMPLATE=$CODE_PATH"/templates/mapping_template.txt"	#-------#	AutoFlow mapping template. It is advisable not to modify this variable
	export MIN_READ_LENGTH=65 	#-------#	Minimun read length theshold in primming step. Set 10 for miRNA detection or miRNA DEA analysis
	export read_layout='paired'	#-------#	Read layout must be defined as 'paired' in case of paired-end samples or 'single' in case of single-end samples
	export stranded='yes'	#-------#	This parametrer must be changed in case of not-stranded sequencing only (rare case)


	################## Differential expression analysis variables #####################
	##### IMPORTANT: To delete a variable, you just have to define it as an empty string

	######	DEgenesHunter comparisons	######

	export TARGETS=`ls *_target.txt | tr "\n" ","` ; TARGETS=${TARGETS%?}	#-------#	Target file location, including a short sample description	
	export de_pvalue="0.05"	#-------#	Minimum P-value threshold 
	export de_packages="WDELN"	#-------#	Gene expresion analysis algorithms to perform (D = DESeq2, E = edgeR, L = limma, N= NOISeq, W = WGCNA)
	export de_min_pack="4"	#-------#	Number of minimum packages to consider a gene as a 'PREVALENT' DEG
	export de_logfc="1"	#-------#	Log2FC threshold
	export WGCNA_mergecutHeight="0.25"      #-------#       Value to merge two similar modules: Maximum dissimilarity (i.e., 1-correlation) 
        export WGCNA_min_genes_cluster="30"     #-------#       Minimum number of genes to keep a cluster       
        export WGCNA_detectcutHeight="0.995"    #-------#       Cut height to split modules

	######## Functional DEgenesHunter Analysis	#######
	
	export fun_pvalue=0.1 #-------#	Minimum P-value thresholdMinimum P-value threshold
	export fun_an_type="KgR"	#-------#	Ontologies or pathways analysis to perform (G = GO [topGO], K = KEGG, g = GO [clusterProfiler], R = Reactome [clusterProfiler])
	export fun_an_performance="o"	#-------#	Functional analysys type ("o" for Over Representation Analysis and "g" for Gene Set Enrichment Analysis)
	export GO_modules="MBC"	#-------#	Gene subonthology analysis to perform (M = Molecular Function, B = Biological Process, C = Celular Components)
	export fun_remote_mode=''	#-------#	Remote mode. deamon.sh 4 is executed at loggin when remote mode is activated (Use (b) to launch biomaRt translation; (k) to use Kegg remote data base)
	export custom_nomenclature=''	#-------#	File with custom nomenclature in GMT format
	export fun_organism='Human'	#-------#	Organism to perform functional analysis

	if [[ $experiment_type == "RNAseq_transcriptome" ]]; then
		export transcriptome=$mapping_ref'/miRNA_nr.fasta'	#-------#	Transcriptome or custom fasta to use as reference. Default options is set for miRNA differential expresion analysis usin as reference the miRNAs determinated in 'miRNAseq_detection' mode
		export annotation_list=''	#-------#	Functional annotation of transcripts based on an model organism fot functional analysis. Firts column must be ENSEMBL gene ID and secong column transcript name
	fi
fi
